!function(){function n(n,t,e,a){Object.defineProperty(n,t,{get:e,set:a,enumerable:!0,configurable:!0})}function t(n){return n&&n.__esModule?n.default:n}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},c={},i=e.parcelRequire62bd;null==i&&((i=function(n){if(n in a)return a[n].exports;if(n in c){var t=c[n];delete c[n];var e={id:n,exports:{}};return a[n]=e,t.call(e.exports,e,e.exports),e.exports}var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(n,t){c[n]=t},e.parcelRequire62bd=i),i.register("iE7OH",(function(t,e){var a,c;n(t.exports,"register",(function(){return a}),(function(n){return a=n})),n(t.exports,"resolve",(function(){return c}),(function(n){return c=n}));var i={};a=function(n){for(var t=Object.keys(n),e=0;e<t.length;e++)i[t[e]]=n[t[e]]},c=function(n){var t=i[n];if(null==t)throw new Error("Could not resolve bundle with id "+n);return t}})),i.register("aNJCr",(function(t,e){var a;n(t.exports,"getBundleURL",(function(){return a}),(function(n){return a=n}));var c={};function i(n){return(""+n).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}a=function(n){var t=c[n];return t||(t=function(){try{throw new Error}catch(t){var n=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(n)return i(n[2])}return"/"}(),c[n]=t),t}})),i("iE7OH").register(JSON.parse('{"EVgbq":"index.9c3219c9.js","ee16w":"sprite.47a876e0.svg","5UbS1":"index.41811217.css"}'));var o;o=i("aNJCr").getBundleURL("EVgbq")+i("iE7OH").resolve("ee16w");var r={};Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")};var s={};function l(n,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(n,t,e){t&&l(n.prototype,t);e&&l(n,e);return n};var u="https://api.themoviedb.org/3",d="81f57ce8a5863d84fdab7c29ba0c37c2",v=function(){"use strict";function n(){t(r)(this,n),this.searchQuery="",this.page=1,this.searchId="66732"}return t(s)(n,[{key:"fetchGenres",value:function(n){var t="".concat(u,"/genre/").concat(n,"/list?api_key=").concat(d,"&language=en-US");return fetch(t).then((function(n){return n.json()}))}},{key:"fetchTrending",value:function(){var n="".concat(u,"/trending/movie/day?api_key=").concat(d,"&page=").concat(this.page);return fetch(n).then((function(n){return n.json()}))}},{key:"fetchSearchMovie",value:function(){var n="".concat(u,"/search/movie?api_key=").concat(d,"&language=en-US&query=").concat(this.searchQuery,"&page=").concat(this.page,"&include_adult=false");return fetch(n).then((function(n){return n.json()}))}},{key:"fetchMovieDetails",value:function(n){var t="".concat(u,"/movie/").concat(n,"?api_key=").concat(d,"&language=en-US");return fetch(t).then((function(n){return n.json()}))}},{key:"incrementPage",value:function(){this.page+=1}},{key:"decrementPage",value:function(){this.page-=1}},{key:"pageNumber",get:function(){return this.page},set:function(n){this.page=n}},{key:"resetPage",value:function(){this.page=1}},{key:"query",get:function(){return this.searchQuery},set:function(n){this.searchQuery=n}},{key:"movieId",get:function(){return this.searchId},set:function(n){this.searchId=n}}]),n}(),f=new v,g=function(n){n.preventDefault(),f.query=n.currentTarget.elements.searchQuery.value.trim(),""===f.searchQuery?console.log("Пустий пошук"):(f.resetPage(),f.fetchSearchMovie().then(console.log))},h=function(){var n=document.querySelector(".header");n.innerHTML='<div class="nav-wrap">\n    <a href="#" class="header__logo" id="logoLink">\n     <svg class="header__icon">\n        <use href="'.concat(t(o),'#icon-main-logo"></use>\n      </svg>\n      <span class="header__text">Filmoteka</span>\n    </a>\n    <nav>\n      <ul class="nav-list">\n        <li class="nav-list__item">\n          <a\n            class="nav-list__link nav-list__link--current"\n            href="#"\n            id="homeLink"\n            >Home</a\n          >\n        </li>\n        <li class="nav-list__item">\n          <a class="nav-list__link" href="#" id="libraryLink">My library</a>\n        </li>\n      </ul>\n    </nav>\n  </div>\n  <div class="search-form-wrap">\n    <form class="search-form" id="search-movie">\n      <input\n        class="search-form__input"\n        name="searchQuery"\n        type="text"\n        placeholder="Movie search"\n      />\n      <button class="search-form__button-submit" type="submit">\n       <svg width="12" height="12">\n          <use href="').concat(t(o),'#icon-search"></use>\n        </svg>\n      </button>\n    </form>\n  </div>\n  <p class="notification">\n    Search result is not successful. Enter the correct movie name and try again.\n  </p>\n'),n.classList.remove("additional-bg"),document.getElementById("libraryLink").addEventListener("click",m),document.getElementById("search-movie").addEventListener("submit",g)},_=function(n){n.preventDefault(),h()},p=function(){var n=document.querySelector(".header");n.innerHTML='<div class="nav-wrap additional-margin">\n    <a href="#" class="header__logo" id="logoLink">\n      <svg class="header__icon">\n        <use href="'.concat(t(o),'#icon-main-logo"></use>\n      </svg>\n      <span class="header__text">Filmoteka</span>\n    </a>\n    <nav>\n      <ul class="nav-list">\n        <li class="nav-list__item">\n          <a class="nav-list__link" href="#" id="homeLink">Home</a>\n        </li>\n        <li class="nav-list__item">\n          <a class="nav-list__link nav-list__link--current" href="#" id="libraryLink"\n            >My library</a\n          >\n        </li>\n      </ul>\n    </nav>\n  </div>\n  <ul class="button-list">\n    <li class="button-list__item">\n      <button class="button-list__btn button-list__btn--current" type="button">\n        Watched\n      </button>\n    </li>\n    <li class="button-list__item">\n      <button class="button-list__btn" type="button">Queue</button>\n    </li>\n  </ul>\n'),n.classList.add("additional-bg");var e=document.getElementById("homeLink"),a=document.getElementById("logoLink");e.addEventListener("click",_),a.addEventListener("click",_)},m=function(n){n.preventDefault(),p()},b=document.querySelector("#root"),y=function(){var n='<header class="header container">\n  <div class="nav-wrap">\n    <a href="#" class="header__logo" id="logoLink">\n      <svg class="header__icon">\n        <use href="'.concat(t(o),'#icon-main-logo"></use>\n      </svg>\n      <span class="header__text">Filmoteka</span>\n    </a>\n    <nav>\n      <ul class="nav-list">\n        <li class="nav-list__item">\n          <a\n            class="nav-list__link nav-list__link--current"\n            href="#"\n            id="homeLink"\n            >Home</a\n          >\n        </li>\n        <li class="nav-list__item">\n          <a class="nav-list__link" href="#" id="libraryLink">My library</a>\n        </li>\n      </ul>\n    </nav>\n  </div>\n  <div class="search-form-wrap">\n    <form class="search-form" id="search-movie">\n      <input\n        class="search-form__input"\n        name="searchQuery"\n        type="text"\n        placeholder="Movie search"\n      />\n      <button class="search-form__button-submit" type="submit">\n        <svg width="12" height="12">\n          <use href="').concat(t(o),'#icon-search"></use>\n        </svg>\n      </button>\n    </form>\n  </div>\n  <p class="notification">\n    Search result is not successful. Enter the correct movie name and try again.\n  </p>\n</header>');b.insertAdjacentHTML("afterbegin",n),document.getElementById("libraryLink").addEventListener("click",m),document.getElementById("search-movie").addEventListener("submit",g)};function k(n,t){return n.map((function(n){var e=n.poster_path,a=n.original_title,c=n.original_name,i=n.genre_ids,o=n.release_date,r=n.first_air_date,s=n.vote_average,l=n.id,u=a||c,d=new Date(o||r).getFullYear(),v=i.slice(0,2).map((function(n){return t.get(n)}));i.length>2&&v.push("Others");var f=v.join(", "),g=s.toFixed(1);return'<li class="gallery__item card" data-id="'.concat(l,'">\n          <img\n            class="card__image"\n            src="https://image.tmdb.org/t/p/w500/').concat(e,'"\n            alt="poster"\n            loading="lazy"\n          />\n          <div class="card__info" >\n            <p class="card__title">').concat(u,'</p>\n            <div class="card__movie-info">\n              <p class="card__genre">').concat(f,'</p>\n              <span class="vertical">&nbsp|&nbsp</span>\n              <p class="card__release">').concat(d,'</p>\n              <p class="card__rating">').concat(g,"</p>\n            </div>\n          </div>\n      </li>")})).join("")}function w(n,e){var a='<button class="pagination__arrow pagination__arrow-left" id=\'previous\'>\n                      <svg class="pagination-arrow-icon" >\n                        <use href="'.concat(t(o),'#icon-arrow-left"></use>\n                      </svg>\n                    </button>'),c='<button class="pagination__arrow pagination__arrow-right" id=\'next\'>\n                      <svg class="pagination-arrow-icon">\n                        <use href="'.concat(t(o),'#icon-arrow-right" ></use>\n                      </svg>\n                    </button>'),i='<li class="item">\n                          <button class="pagination__btn">1</button>\n                        </li>',r='<li class="item">\n                    <button class="pagination-btn-more">...</button>\n                  </li>',s='<li class="item">\n                        <button class="pagination__btn">'.concat(n-2,"</button>\n                      </li>"),l='<li class="item">\n                    <button class="pagination__btn">'.concat(n-1,"</button>\n                  </li>"),u='<li class="item">\n                        <button class="pagination__btn pagination__btn--choice">'.concat(n,"</button>\n                      </li>"),d='<li class="item">\n                    <button class="pagination__btn">'.concat(n+1,"</button>\n                  </li>"),v=' <li class="item">\n                          <button class="pagination__btn">'.concat(n+2,"</button>\n                        </li>"),f='<li class="item">\n                    <button class="pagination__btn">'.concat(e,"</button>\n                  </li>");return 1===n?' <ul class="pagination-list">\n              '.concat(u," \n              ").concat(d,"\n              ").concat(v,"\n              ").concat(r,"\n              ").concat(f,"\n            </ul>\n            ").concat(c):2===n?"".concat(a,'\n            <ul class="pagination-list">\n              ').concat(l,"\n              ").concat(u," \n              ").concat(d,"\n              ").concat(v,"\n              ").concat(r,"\n              ").concat(f,"\n            </ul>\n            ").concat(c):3===n?"".concat(a,'\n            <ul class="pagination-list">\n              ').concat(s,"\n              ").concat(l,"\n              ").concat(u," \n              ").concat(d,"\n              ").concat(v,"\n              ").concat(r,"\n              ").concat(f,"\n            </ul>\n            ").concat(c):n===e-2?"".concat(a,'\n            <ul class="pagination-list">\n              ').concat(i,"\n              ").concat(r,"\n              ").concat(s,"\n              ").concat(l,"\n              ").concat(u," \n              ").concat(d,"\n              ").concat(v,"\n            </ul>\n            ").concat(c):n===e-1?"".concat(a,'\n            <ul class="pagination-list">\n              ').concat(i,"\n              ").concat(r,"\n              ").concat(s,"\n              ").concat(l,"\n              ").concat(u," \n              ").concat(d,"\n            </ul>\n            ").concat(c):n===e?"".concat(a,'\n            <ul class="pagination-list">\n              ').concat(i,"\n              ").concat(r,"\n              ").concat(s,"\n              ").concat(l,"\n              ").concat(u," \n            </ul>"):"".concat(a,'\n            <ul class="pagination-list">\n              ').concat(i,"\n              ").concat(r,"\n              ").concat(s,"\n              ").concat(l,"\n              ").concat(u," \n              ").concat(d,"\n              ").concat(v,"\n              ").concat(r,"\n              ").concat(f,"\n            </ul>\n            ").concat(c)}function L(n){var t=document.querySelector(".pagination"),e=M.pageNumber,a=n.total_pages;t.innerHTML=w(e,a),t.addEventListener("click",(function n(a){if(a.preventDefault(),+a.target.textContent===e)return void console.log("Поточна сторінка");if("next"===a.target.id)return M.incrementPage(),t.removeEventListener("click",n),void H();if("previous"===a.target.id)return M.decrementPage(),t.removeEventListener("click",n),void H();"BUTTON"===a.target.nodeName&&(M.pageNumber=+a.target.textContent,t.removeEventListener("click",n),H())}))}var E=new v;function x(n){var t=n.results;Promise.all([E.fetchGenres("movie"),E.fetchGenres("tv")]).then((function(e){var a=e.flatMap((function(n){return n.genres})),c=new Map(a.map((function(n){return[n.id,n.name]})));document.querySelector(".gallery").innerHTML=k(t,c),L(n)})).catch(console.log)}var M=new v;function H(){M.fetchTrending().then(x).catch(console.log)}var S=document.querySelector("#root");document.addEventListener("DOMContentLoaded",(y(),S.insertAdjacentHTML("beforeend",'\n  <section class="section">\n  <div class="container">\n    <h2 class="visually-hidden">Gallery list</h2>\n    <ul class="gallery"></ul>\n    <div class="pagination">\n      \n    </div>\n  </div>\n</section>'),S.insertAdjacentHTML("beforeend",'<footer>\n  <div class="footer__container container">\n    <p class="footer__text">© 2020 | All Rights Reserved |</p>\n    <p class="footer__text">\n      Developed with<svg class="footer__icon" width="14" height="12.75">\n        <use href="'.concat(t(o),'#icon-heart"></use></svg\n      >by\n      <button type="button" class="footer__button">GoIT Students</button>\n    </p>\n  </div>\n</footer>')),void H()),{once:!0})}();
//# sourceMappingURL=index.9c3219c9.js.map
