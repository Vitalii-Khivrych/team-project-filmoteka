function n(n,e,t,a){Object.defineProperty(n,e,{get:t,set:a,enumerable:!0,configurable:!0})}function e(n){return n&&n.__esModule?n.default:n}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},i={},s=t.parcelRequire62bd;null==s&&((s=function(n){if(n in a)return a[n].exports;if(n in i){var e=i[n];delete i[n];var t={id:n,exports:{}};return a[n]=t,e.call(t.exports,t,t.exports),t.exports}var s=new Error("Cannot find module '"+n+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(n,e){i[n]=e},t.parcelRequire62bd=s),s.register("kyEFX",(function(e,t){var a,i;n(e.exports,"register",(function(){return a}),(function(n){return a=n})),n(e.exports,"resolve",(function(){return i}),(function(n){return i=n}));var s={};a=function(n){for(var e=Object.keys(n),t=0;t<e.length;t++)s[e[t]]=n[e[t]]},i=function(n){var e=s[n];if(null==e)throw new Error("Could not resolve bundle with id "+n);return e}})),s("kyEFX").register(JSON.parse('{"5ZPII":"index.532af24c.js","lp5u4":"sprite.47a876e0.svg","5UbS1":"index.41811217.css"}'));var r;r=new URL(s("kyEFX").resolve("lp5u4"),import.meta.url).toString();class o{fetchGenres(n){return fetch(`https://api.themoviedb.org/3/genre/${n}/list?api_key=81f57ce8a5863d84fdab7c29ba0c37c2&language=en-US`).then((n=>n.json()))}fetchTrending(){const n=`https://api.themoviedb.org/3/trending/movie/day?api_key=81f57ce8a5863d84fdab7c29ba0c37c2&page=${this.page}`;return fetch(n).then((n=>n.json()))}fetchSearchMovie(){const n=`https://api.themoviedb.org/3/search/movie?api_key=81f57ce8a5863d84fdab7c29ba0c37c2&language=en-US&query=${this.searchQuery}&page=${this.page}&include_adult=false`;return fetch(n).then((n=>n.json()))}fetchMovieDetails(n){return fetch(`https://api.themoviedb.org/3/movie/${n}?api_key=81f57ce8a5863d84fdab7c29ba0c37c2&language=en-US`).then((n=>n.json()))}incrementPage(){this.page+=1}decrementPage(){this.page-=1}get pageNumber(){return this.page}set pageNumber(n){this.page=n}resetPage(){this.page=1}get query(){return this.searchQuery}set query(n){this.searchQuery=n}get movieId(){return this.searchId}set movieId(n){this.searchId=n}constructor(){this.searchQuery="",this.page=1,this.searchId="66732"}}const l=new o,c=n=>{n.preventDefault(),l.query=n.currentTarget.elements.searchQuery.value.trim();""===l.searchQuery?console.log("Пустий пошук"):(l.resetPage(),l.fetchSearchMovie().then(console.log))},u=()=>{const n=document.querySelector(".header");n.innerHTML=`<div class="nav-wrap">\n    <a href="#" class="header__logo" id="logoLink">\n     <svg class="header__icon">\n        <use href="${e(r)}#icon-main-logo"></use>\n      </svg>\n      <span class="header__text">Filmoteka</span>\n    </a>\n    <nav>\n      <ul class="nav-list">\n        <li class="nav-list__item">\n          <a\n            class="nav-list__link nav-list__link--current"\n            href="#"\n            id="homeLink"\n            >Home</a\n          >\n        </li>\n        <li class="nav-list__item">\n          <a class="nav-list__link" href="#" id="libraryLink">My library</a>\n        </li>\n      </ul>\n    </nav>\n  </div>\n  <div class="search-form-wrap">\n    <form class="search-form" id="search-movie">\n      <input\n        class="search-form__input"\n        name="searchQuery"\n        type="text"\n        placeholder="Movie search"\n      />\n      <button class="search-form__button-submit" type="submit">\n       <svg width="12" height="12">\n          <use href="${e(r)}#icon-search"></use>\n        </svg>\n      </button>\n    </form>\n  </div>\n  <p class="notification">\n    Search result is not successful. Enter the correct movie name and try again.\n  </p>\n`,n.classList.remove("additional-bg");document.getElementById("libraryLink").addEventListener("click",h);document.getElementById("search-movie").addEventListener("submit",c)},d=n=>{n.preventDefault(),u()},g=()=>{const n=document.querySelector(".header");n.innerHTML=`<div class="nav-wrap additional-margin">\n    <a href="#" class="header__logo" id="logoLink">\n      <svg class="header__icon">\n        <use href="${e(r)}#icon-main-logo"></use>\n      </svg>\n      <span class="header__text">Filmoteka</span>\n    </a>\n    <nav>\n      <ul class="nav-list">\n        <li class="nav-list__item">\n          <a class="nav-list__link" href="#" id="homeLink">Home</a>\n        </li>\n        <li class="nav-list__item">\n          <a class="nav-list__link nav-list__link--current" href="#" id="libraryLink"\n            >My library</a\n          >\n        </li>\n      </ul>\n    </nav>\n  </div>\n  <ul class="button-list">\n    <li class="button-list__item">\n      <button class="button-list__btn button-list__btn--current" type="button">\n        Watched\n      </button>\n    </li>\n    <li class="button-list__item">\n      <button class="button-list__btn" type="button">Queue</button>\n    </li>\n  </ul>\n`,n.classList.add("additional-bg");const t=document.getElementById("homeLink"),a=document.getElementById("logoLink");t.addEventListener("click",d),a.addEventListener("click",d)},h=n=>{n.preventDefault(),g()},_=document.querySelector("#root"),p=()=>{const n=`<header class="header container">\n  <div class="nav-wrap">\n    <a href="#" class="header__logo" id="logoLink">\n      <svg class="header__icon">\n        <use href="${e(r)}#icon-main-logo"></use>\n      </svg>\n      <span class="header__text">Filmoteka</span>\n    </a>\n    <nav>\n      <ul class="nav-list">\n        <li class="nav-list__item">\n          <a\n            class="nav-list__link nav-list__link--current"\n            href="#"\n            id="homeLink"\n            >Home</a\n          >\n        </li>\n        <li class="nav-list__item">\n          <a class="nav-list__link" href="#" id="libraryLink">My library</a>\n        </li>\n      </ul>\n    </nav>\n  </div>\n  <div class="search-form-wrap">\n    <form class="search-form" id="search-movie">\n      <input\n        class="search-form__input"\n        name="searchQuery"\n        type="text"\n        placeholder="Movie search"\n      />\n      <button class="search-form__button-submit" type="submit">\n        <svg width="12" height="12">\n          <use href="${e(r)}#icon-search"></use>\n        </svg>\n      </button>\n    </form>\n  </div>\n  <p class="notification">\n    Search result is not successful. Enter the correct movie name and try again.\n  </p>\n</header>`;_.insertAdjacentHTML("afterbegin",n);document.getElementById("libraryLink").addEventListener("click",h);document.getElementById("search-movie").addEventListener("submit",c)};function v(n,e){return n.map((({poster_path:n,original_title:t,original_name:a,genre_ids:i,release_date:s,first_air_date:r,vote_average:o,id:l})=>{const c=t||a,u=new Date(s||r).getFullYear(),d=i.slice(0,2).map((n=>e.get(n)));i.length>2&&d.push("Others");return`<li class="gallery__item card" data-id="${l}">\n          <img\n            class="card__image"\n            src="https://image.tmdb.org/t/p/w500/${n}"\n            alt="poster"\n            loading="lazy"\n          />\n          <div class="card__info" >\n            <p class="card__title">${c}</p>\n            <div class="card__movie-info">\n              <p class="card__genre">${d.join(", ")}</p>\n              <span class="vertical">&nbsp|&nbsp</span>\n              <p class="card__release">${u}</p>\n              <p class="card__rating">${o.toFixed(1)}</p>\n            </div>\n          </div>\n      </li>`})).join("")}function m(n,t){const a=`<button class="pagination__arrow pagination__arrow-left" id='previous'>\n                      <svg class="pagination-arrow-icon" >\n                        <use href="${e(r)}#icon-arrow-left"></use>\n                      </svg>\n                    </button>`,i=`<button class="pagination__arrow pagination__arrow-right" id='next'>\n                      <svg class="pagination-arrow-icon">\n                        <use href="${e(r)}#icon-arrow-right" ></use>\n                      </svg>\n                    </button>`,s='<li class="item">\n                          <button class="pagination__btn">1</button>\n                        </li>',o='<li class="item">\n                    <button class="pagination-btn-more">...</button>\n                  </li>',l=`<li class="item">\n                        <button class="pagination__btn">${n-2}</button>\n                      </li>`,c=`<li class="item">\n                    <button class="pagination__btn">${n-1}</button>\n                  </li>`,u=`<li class="item">\n                        <button class="pagination__btn pagination__btn--choice">${n}</button>\n                      </li>`,d=`<li class="item">\n                    <button class="pagination__btn">${n+1}</button>\n                  </li>`,g=` <li class="item">\n                          <button class="pagination__btn">${n+2}</button>\n                        </li>`,h=`<li class="item">\n                    <button class="pagination__btn">${t}</button>\n                  </li>`;return 1===n?` <ul class="pagination-list">\n              ${u} \n              ${d}\n              ${g}\n              ${o}\n              ${h}\n            </ul>\n            ${i}`:2===n?`${a}\n            <ul class="pagination-list">\n              ${c}\n              ${u} \n              ${d}\n              ${g}\n              ${o}\n              ${h}\n            </ul>\n            ${i}`:3===n?`${a}\n            <ul class="pagination-list">\n              ${l}\n              ${c}\n              ${u} \n              ${d}\n              ${g}\n              ${o}\n              ${h}\n            </ul>\n            ${i}`:n===t-2?`${a}\n            <ul class="pagination-list">\n              ${s}\n              ${o}\n              ${l}\n              ${c}\n              ${u} \n              ${d}\n              ${g}\n            </ul>\n            ${i}`:n===t-1?`${a}\n            <ul class="pagination-list">\n              ${s}\n              ${o}\n              ${l}\n              ${c}\n              ${u} \n              ${d}\n            </ul>\n            ${i}`:n===t?`${a}\n            <ul class="pagination-list">\n              ${s}\n              ${o}\n              ${l}\n              ${c}\n              ${u} \n            </ul>`:`${a}\n            <ul class="pagination-list">\n              ${s}\n              ${o}\n              ${l}\n              ${c}\n              ${u} \n              ${d}\n              ${g}\n              ${o}\n              ${h}\n            </ul>\n            ${i}`}function f(n){const e=document.querySelector(".pagination"),t=y.pageNumber,a=n.total_pages;e.innerHTML=m(t,a),e.addEventListener("click",(function n(a){if(a.preventDefault(),+a.target.textContent===t)return void console.log("Поточна сторінка");if("next"===a.target.id)return y.incrementPage(),e.removeEventListener("click",n),void k();if("previous"===a.target.id)return y.decrementPage(),e.removeEventListener("click",n),void k();"BUTTON"===a.target.nodeName&&(y.pageNumber=+a.target.textContent,e.removeEventListener("click",n),k())}))}const b=new o;function $(n){const e=n.results;Promise.all([b.fetchGenres("movie"),b.fetchGenres("tv")]).then((t=>{const a=t.flatMap((n=>n.genres)),i=new Map(a.map((n=>[n.id,n.name])));document.querySelector(".gallery").innerHTML=v(e,i),f(n)})).catch(console.log)}const y=new o;function k(){y.fetchTrending().then($).catch(console.log)}const L=document.querySelector("#root");document.addEventListener("DOMContentLoaded",(p(),L.insertAdjacentHTML("beforeend",'\n  <section class="section">\n  <div class="container">\n    <h2 class="visually-hidden">Gallery list</h2>\n    <ul class="gallery"></ul>\n    <div class="pagination">\n      \n    </div>\n  </div>\n</section>'),L.insertAdjacentHTML("beforeend",`<footer>\n  <div class="footer__container container">\n    <p class="footer__text">© 2020 | All Rights Reserved |</p>\n    <p class="footer__text">\n      Developed with<svg class="footer__icon" width="14" height="12.75">\n        <use href="${e(r)}#icon-heart"></use></svg\n      >by\n      <button type="button" class="footer__button">GoIT Students</button>\n    </p>\n  </div>\n</footer>`),void k()),{once:!0});
//# sourceMappingURL=index.532af24c.js.map
